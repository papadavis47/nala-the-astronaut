---
import MainLayout from '@layouts/MainLayout.astro';
import { Image } from 'astro:assets';

const images = import.meta.glob<{ default: ImageMetadata }>(
  '../images/*.webp',
  { eager: true }
);

const galleryImages = Object.entries(images).map(([path, module]) => {
  const filename = path.split('/').pop()?.replace('.webp', '') || '';
  const captions: Record<string, string> = {
    'nala-playing': 'Field training mission in progress ğŸ¾',
    'nala-portrait': 'Official crew portrait ğŸ“·',
    'nala-sleeping': 'Rest and recovery protocol ğŸ’¤',
    'nala1': 'Space cadet at ease ğŸŒŸ',
    'nala2': 'Mission accomplished! ğŸš€',
    'nalita': 'Commander Nala reporting for duty ğŸ•',
  };
  
  return {
    src: module.default,
    alt: `Nala the Golden Retriever - ${filename.replace(/-/g, ' ')}`,
    caption: captions[filename] || 'Adventures with Nala âœ¨',
    filename,
  };
});
---

<MainLayout title="Nala the Astronaut - Gallery">
  <div class="bg-gradient-to-b from-[hsl(220,40%,15%)] to-[hsl(220,30%,25%)] py-12 md:py-16">
    <div class="w-full max-w-5xl mx-auto px-6 lg:px-8">
      <div class="text-center mb-8">
        <p class="!text-yellow-300 font-medium text-lg tracking-wide uppercase mb-2">
          Mission Archives
        </p>
        <h1 class="text-4xl md:text-5xl font-bold !text-yellow-300 mb-4">
          Photo Gallery
        </h1>
        <p class="!text-yellow-300 text-lg max-w-2xl mx-auto">
          Documented evidence of the cutest space explorer in the galaxy. 
          Each photo captures a moment of joy, adventure, or strategic napping.
        </p>
      </div>
    </div>
  </div>
  
  <div class="w-full max-w-5xl mx-auto px-6 lg:px-8 py-4">
    <section class="py-12">
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {galleryImages.map((image) => (
          <figure class="group relative bg-card-bg rounded-xl overflow-hidden shadow-lg border-2 border-white/50 hover:shadow-2xl transition-all duration-300 hover:-translate-y-1">
            <div class="aspect-square overflow-hidden">
              <Image
                src={image.src}
                alt={image.alt}
                class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                widths={[300, 400, 600]}
                sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"
              />
            </div>
            <figcaption class="p-4 text-center">
              <p class="text-text-primary font-semibold">{image.caption}</p>
            </figcaption>
          </figure>
        ))}
      </div>
    </section>
    
    <section class="py-8 md:py-12 text-center">
      <div class="bg-card-bg rounded-2xl p-8 shadow-lg border-2 border-white/50">
        <h2 class="text-2xl md:text-3xl font-bold text-headings mb-4 ">
          Want to See More?
        </h2>
        <p class="text-lg max-w-xl mx-auto mb-6">
          We're always adding new photos from Nala's adventures. 
          Check back soon for more mission updates!
        </p>
        <a 
          href="/about" 
          class="inline-flex items-center justify-center gap-2 px-6 py-3 bg-gold-gradient text-white font-semibold rounded-full hover:scale-105 transition-transform shadow-lg"
        >
          Learn More About Nala
          <span>ğŸ•</span>
        </a>
      </div>
    </section>
  </div>
</MainLayout>
